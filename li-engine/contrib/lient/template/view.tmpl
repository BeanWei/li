{{/* gotype: entgo.io/ent/entc/gen.Type */}}

{{ define "model/additional/lient-view" }}
func List{{ $.Name }}View() view.Node {
	return node.List("{{ $.Name }}").
		ForInit("@list{{ $.Name }}", List{{ $.Name }}Controller).
		Children(
			node.ListAction("actions").Children(
				node.ListActionRecordEditDrawer("add{{ $.Name }}").
					Title("新建").
					Children(
                        {{- range $f := $.Fields }}
                            {{- if $annotation := $f.Annotations.LiEnt }}
                                {{- if $annotation.View }}
                                    {{ $.Package }}.Node{{ $f.StructField }}(),
                                {{- end }}
                            {{- end }}
                        {{- end }}
					).
					ForSubmit("@add{{ $.Name }}", Create{{ $.Name }}Controller),
				node.ListActionRowSelection("deleteMany{{ $.Name }}").
					Title("删除").
					ForSubmit("@deleteMany{{ $.Name }}", DeleteMany{{ $.Name }}Controller).
					AfterReload().
					ConfirmTitle("确认删除").
					ButtonStatus("danger"),
			),
			node.ListTable("table").
				RowSelectionType("checkbox").
				Columns(
                    {{- range $f := $.Fields }}
                        {{- if $annotation := $f.Annotations.LiEnt }}
                            {{- if $annotation.View }}
                                {{ $.Package }}.Node{{ $f.StructField }}().SetXReadPretty(true),
                            {{- end }}
                        {{- end }}
                    {{- end }}
				),
		)
}
{{ end }}